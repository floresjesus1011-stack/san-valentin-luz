<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Para Luz ğŸ’–</title>

  <style>
    :root{
      --pink: #ff4fa3;
      --soft: #ffe3f1;
      --dark: #8a0042;
      --card: rgba(255,255,255,0.93);
    }
    *{ box-sizing: border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, var(--soft), #ffd1e8, #ffc2df);
      overflow:hidden;
      padding: 16px;
    }

    .card{
      width:min(640px, 94vw);
      background: var(--card);
      border: 2px solid rgba(255,79,163,0.22);
      border-radius: 24px;
      padding: 22px 18px 18px;
      text-align:center;
      box-shadow: 0 20px 55px rgba(0,0,0,0.22);
      backdrop-filter: blur(6px);
      position: relative;
    }

    .badge{
      display:inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(255,79,163,0.14);
      border: 1px solid rgba(255,79,163,0.22);
      color: var(--dark);
      font-weight: 900;
      margin-bottom: 10px;
    }

    h1{
      margin: 10px 0 10px;
      color: var(--dark);
      font-size: clamp(24px, 4.2vw, 34px);
      line-height: 1.15;
    }

    .sub{
      margin: 0 0 16px;
      color:#6b1a4a;
      font-weight: 650;
      opacity: 0.95;
    }

    /* Ãrea de botones */
    .buttons{
      position: relative;
      width: min(520px, 92vw);
      margin: 14px auto 12px;
      height: 170px; /* mÃ¡s alto = NO puede huir lejos */
    }

    button{
      border:0;
      border-radius: 999px;
      padding: 18px 30px;
      font-weight: 950;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      font-size: 22px;
      min-width: 170px;
      user-select:none;
      touch-action: manipulation;
      position: absolute;
      left: 50%;
      top: 10px;
      transform: translateX(-50%);
    }

    button:hover{ filter: brightness(1.03); }

    .yes{
      background: linear-gradient(135deg, var(--pink), #ff7cc2);
      color:white;
      box-shadow: 0 12px 24px rgba(255,79,163,0.28);
      transform-origin: center;
      z-index: 5;
    }

    .no{
      background:#b8b8b8;
      color:white;
      z-index: 4;
    }

    /* Imagen debajo */
    .nayeon-wrap{
      margin: 10px auto 2px;
      width: min(270px, 74vw);
      aspect-ratio: 1 / 1;
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 14px 30px rgba(0,0,0,0.18);
      border: 2px solid rgba(255,79,163,0.18);
      background: #fff;
    }
    .nayeon-wrap img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .tiny{
      margin-top: 10px;
      font-size: 12px;
      color:#6b1a4a;
      opacity:0.75;
    }

    /* corazones */
    .heart{
      position:absolute;
      bottom:-30px;
      user-select:none;
      pointer-events:none;
      animation: floatUp linear infinite;
      opacity:0.8;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,0.14));
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0) rotate(0deg); }
      to{ transform: translateY(-115vh) translateX(40px) rotate(18deg); }
    }

    .disabled{
      pointer-events: none;
      filter: grayscale(0.1) brightness(0.98);
    }
  </style>
</head>

<body>
  <audio id="bgm" src="twice-24-7.mp3" loop preload="auto"></audio>

  <div class="card" id="card">
    <div class="badge">ğŸ­ TWICE â€¢ Nayeon vibes â€¢ Para mi Amor Luz</div>

    <h1 id="question">Â¿Quieres ser mi ValentÃ­n? ğŸ’˜</h1>
    <p class="sub" id="sub">Luz, mi Amorâ€¦ hice esto solo para ti ğŸ°ğŸ’—</p>

    <div class="buttons" id="btnArea">
      <button class="yes" id="yesBtn">SÃ ğŸ’•</button>
      <button class="no" id="noBtn">NO ğŸ’”</button>
    </div>

    <div class="nayeon-wrap">
      <img id="nayeonImg" alt="Nayeon" />
    </div>

    <div class="tiny" id="tiny">Siempre estarÃ© contigo mi vida ğŸ˜Œ</div>
  </div>

<script>
  const NAYEON_IMAGES = [
    "https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Nayeon_251120_1.jpg/640px-Nayeon_251120_1.jpg",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Im_Na-yeon_performing_at_SAC_2016_03.jpg/640px-Im_Na-yeon_performing_at_SAC_2016_03.jpg",
    "https://idolkpop.home.blog/wp-content/uploads/2019/09/nayeon-curiosidades.jpg?w=400",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Nayeon_251120_2.jpg/640px-Nayeon_251120_2.jpg",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Nayeon_241024_2.jpg/640px-Nayeon_241024_2.jpg"
  ];

  let noCount = 0;
  const questions = [
    "Â¿Segura, Amor? ğŸ¥º",
    "Luzâ€¦ piÃ©nsalo otra vez ğŸ’•",
    "Vamos, mi Amorâ€¦ di que sÃ­ ğŸ˜˜",
    "Ok, ya no hay botÃ³n NO ğŸ˜â¤ï¸"
  ];

  // ===== MÃºsica: primer toque SIEMPRE intenta reproducir =====
  let musicStarted = false;
  const bgm = document.getElementById("bgm");

  function startMusic(){
    if (musicStarted) return;
    // llamar play() lo mÃ¡s directo posible dentro de un gesto del usuario
    bgm.play().then(() => {
      musicStarted = true;
    }).catch(() => {
      // si falla, lo intentarÃ¡ el listener global de primer toque
    });
  }

  // Fallback: primer toque/click en cualquier parte
  function oneTimeStart(){
    startMusic();
    if (musicStarted) {
      document.removeEventListener("pointerdown", oneTimeStart, true);
      document.removeEventListener("click", oneTimeStart, true);
      document.removeEventListener("touchstart", oneTimeStart, true);
    }
  }
  document.addEventListener("pointerdown", oneTimeStart, true);
  document.addEventListener("click", oneTimeStart, true);
  document.addEventListener("touchstart", oneTimeStart, true);

  // ===== Corazones =====
  function hearts(n=12){
    for(let i=0;i<n;i++){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = Math.random() > 0.5 ? "ğŸ’–" : "ğŸ’—";
      h.style.left = (Math.random()*100) + "vw";
      h.style.animationDuration = (4 + Math.random()*6) + "s";
      h.style.fontSize = (14 + Math.random()*22) + "px";
      h.style.opacity = (0.35 + Math.random()*0.6);
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 12000);
    }
  }
  hearts(18);
  setInterval(()=>hearts(10), 2600);

  // ===== Fotos sin repetir =====
  let remaining = [...NAYEON_IMAGES];
  function pickNextImage(){
    if (remaining.length === 0) remaining = [...NAYEON_IMAGES];
    const i = Math.floor(Math.random() * remaining.length);
    return remaining.splice(i, 1)[0];
  }
  function setNewNayeon(){
    const img = document.getElementById("nayeonImg");
    img.src = pickNextImage() + "?r=" + Date.now();
  }
  setNewNayeon();

  // ===== Botones =====
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const btnArea = document.getElementById("btnArea");

  function placeInitialButtons(){
    yesBtn.style.top = "8px";
    yesBtn.style.left = "50%";
    yesBtn.style.transform = "translateX(-50%)";

    // NO BIEN ABAJO para que el salto se note
    noBtn.style.top = "102px";
    noBtn.style.left = "50%";
    noBtn.style.transform = "translateX(-50%)";
  }
  placeInitialButtons();

  // â€œSÃ creceâ€
  let yesScale = 1;
  function growYes(){
    yesScale = Math.min(1.75, yesScale + 0.14);
    yesBtn.style.transform = `translateX(-50%) scale(${yesScale})`;
  }

  function lockYesBriefly(){
    yesBtn.classList.add("disabled");
    setTimeout(() => yesBtn.classList.remove("disabled"), 520);
  }

  // ===== Movimiento del NO: SALTOS MÃS LEJOS =====
  // Idea: moverlo a una "zona opuesta" para que el salto sea evidente.
  function moveNoFar(){
    const areaRect = btnArea.getBoundingClientRect();
    const noW = noBtn.offsetWidth;
    const noH = noBtn.offsetHeight;

    const maxX = Math.max(0, areaRect.width - noW);
    const maxY = Math.max(0, areaRect.height - noH);

    // PosiciÃ³n actual relativa
    const currentLeft = parseFloat(noBtn.style.left || "50");
    const currentTop  = parseFloat(noBtn.style.top  || "102");

    // Elegir "cuadrante" opuesto (izq/der + arriba/abajo)
    // Si estÃ¡ cerca del centro, lo mandamos a esquinas.
    const goLeft  = currentLeft > (areaRect.width * 0.5);
    const goTop   = currentTop  > (areaRect.height * 0.5);

    const xMin = goLeft ? 0 : Math.max(0, maxX * 0.55);
    const xMax = goLeft ? Math.max(0, maxX * 0.45) : maxX;

    const yMin = goTop ? 0 : Math.max(0, maxY * 0.55);
    const yMax = goTop ? Math.max(0, maxY * 0.45) : maxY;

    // random dentro de esa zona (mÃ¡s lejos)
    const x = xMin + Math.random() * Math.max(1, (xMax - xMin));
    const y = yMin + Math.random() * Math.max(1, (yMax - yMin));

    noBtn.style.left = (x + noW/2) + "px";
    noBtn.style.top  = y + "px";
    noBtn.style.transform = "translateX(-50%)";
  }

  function reject(){
    startMusic();          // âœ… primero
    lockYesBriefly();
    setNewNayeon();        // âœ… cambia imagen siempre
    growYes();

    document.getElementById("question").textContent =
      questions[Math.min(noCount, questions.length - 1)];
    document.getElementById("sub").textContent =
      "Cada NO me hace insistir mÃ¡sâ€¦ Nayeon dice que digas que si ğŸ°ğŸ’—";

    noCount++;

    if (noCount >= 4){
      noBtn.style.display = "none";
      document.getElementById("tiny").textContent = "Ya fueâ€¦ el destino dice que es SÃ ğŸ˜ŒğŸ’˜";
    } else {
      // mover lejos despuÃ©s del NO
      setTimeout(moveNoFar, 20);
    }
  }

  function accept(){
    startMusic();
    const card = document.getElementById("card");
    card.innerHTML = `
      <div class="badge">ğŸ’— TWICE approved â€¢ ONCE forever</div>
      <h1>ğŸ’–ğŸ’–ğŸ’–</h1>
      <h1>SabÃ­a que aceptarÃ­as, eres el amor de mi vida.</h1>
      <h1>Poto amorcito ğŸ’•</h1>
      <div class="tiny" style="margin-top:10px;">Luz, mi Amorâ€¦ feliz San ValentÃ­n ğŸ°</div>
    `;
    hearts(26);
  }

  // Eventos
  yesBtn.addEventListener("click", accept);

  // Desktop: al acercarse, huye lejos
  noBtn.addEventListener("mouseenter", () => {
    if (noCount < 4) moveNoFar();
  });

  // MÃ³vil/desktop: pointerdown = NO inmediato (mÃ¡s confiable) + huida lejos
  noBtn.addEventListener("pointerdown", (e) => {
    if (noCount >= 4) return;
    e.preventDefault();
    startMusic(); // âœ… asegurar mÃºsica desde el primer toque
    reject();
  }, { passive: false });
</script>
</body>
</html>

