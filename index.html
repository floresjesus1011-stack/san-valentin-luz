<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Para Luz üíñ</title>

  <style>
    :root{
      --pink: #ff4fa3;
      --soft: #ffe3f1;
      --dark: #8a0042;
      --card: rgba(255,255,255,0.93);
    }
    *{ box-sizing: border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, var(--soft), #ffd1e8, #ffc2df);
      overflow:hidden;
      padding: 16px;
    }

    .card{
      width:min(620px, 94vw);
      background: var(--card);
      border: 2px solid rgba(255,79,163,0.22);
      border-radius: 24px;
      padding: 22px 18px 18px;
      text-align:center;
      box-shadow: 0 20px 55px rgba(0,0,0,0.22);
      backdrop-filter: blur(6px);
      position: relative;
    }

    .badge{
      display:inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(255,79,163,0.14);
      border: 1px solid rgba(255,79,163,0.22);
      color: var(--dark);
      font-weight: 900;
      margin-bottom: 10px;
    }

    h1{
      margin: 10px 0 10px;
      color: var(--dark);
      font-size: clamp(24px, 4.2vw, 34px);
      line-height: 1.15;
    }

    .sub{
      margin: 0 0 16px;
      color:#6b1a4a;
      font-weight: 650;
      opacity: 0.95;
    }

    /* BOTONES GRANDES */
    .buttons{
      display:flex;
      gap: 14px;
      justify-content:center;
      flex-wrap: wrap;
      margin-top: 12px;
      margin-bottom: 14px;
      position: relative;
      min-height: 92px; /* para que no salte el layout cuando se mueva NO */
    }

    button{
      border:0;
      border-radius: 999px;
      padding: 18px 30px;        /* M√ÅS GRANDES */
      font-weight: 950;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      font-size: 22px;           /* M√ÅS GRANDES */
      min-width: 160px;
      user-select:none;
      touch-action: manipulation;
      position: relative;
    }

    button:hover{ transform: scale(1.04); filter: brightness(1.03); }

    .yes{
      background: linear-gradient(135deg, var(--pink), #ff7cc2);
      color:white;
      box-shadow: 0 12px 24px rgba(255,79,163,0.28);
      transform-origin: center;
    }
    .no{
      background:#b8b8b8;
      color:white;
    }

    /* IMAGEN DEBAJO Y M√ÅS CHICA */
    .nayeon-wrap{
      margin: 10px auto 2px;
      width: min(270px, 74vw);     /* M√ÅS CHICA */
      aspect-ratio: 1 / 1;
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 14px 30px rgba(0,0,0,0.18);
      border: 2px solid rgba(255,79,163,0.18);
      background: #fff;
    }
    .nayeon-wrap img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .tiny{
      margin-top: 10px;
      font-size: 12px;
      color:#6b1a4a;
      opacity:0.75;
    }

    /* corazones */
    .heart{
      position:absolute;
      bottom:-30px;
      user-select:none;
      pointer-events:none;
      animation: floatUp linear infinite;
      opacity:0.8;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,0.14));
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0) rotate(0deg); }
      to{ transform: translateY(-115vh) translateX(40px) rotate(18deg); }
    }

    /* NO flotante cuando huye */
    .no-floating{
      position: absolute !important;
      left: 50%;
      top: 0;
      transform: translateX(120px);
      z-index: 5;
    }
  </style>
</head>

<body>
  <!-- M√∫sica local (mant√©n twice-24-7.mp3 en el repo) -->
  <audio id="bgm" src="twice-24-7.mp3" loop preload="auto"></audio>

  <div class="card" id="card">
    <div class="badge">üç≠ TWICE ‚Ä¢ Nayeon vibes ‚Ä¢ Para mi Amor Luz</div>

    <h1 id="question">¬øQuieres ser mi Valent√≠n? üíò</h1>
    <p class="sub" id="sub">Luz, mi Amor‚Ä¶ hice esto solo para ti üê∞üíó</p>

    <div class="buttons" id="btnArea">
      <button class="yes" id="yesBtn" onclick="accept()">S√ç üíï</button>
      <button class="no" id="noBtn" onclick="reject()">NO üíî</button>
    </div>

    <!-- Imagen DEBAJO de los botones -->
    <div class="nayeon-wrap">
      <img id="nayeonImg" alt="Nayeon" />
    </div>

    <div class="tiny" id="tiny">Tip: cada vez que intentas decir NO‚Ä¶ el S√ç se pone m√°s grande üòå</div>
  </div>

<script>
  // URLs estables (Wikimedia). Puedes agregar m√°s si quieres.
  const NAYEON_IMAGES = [
    "https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Nayeon_251120_1.jpg/640px-Nayeon_251120_1.jpg",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Im_Na-yeon_performing_at_SAC_2016_03.jpg/640px-Im_Na-yeon_performing_at_SAC_2016_03.jpg"
  ];

  // Preguntas: 4 repreguntas (en la 4ta desaparece NO)
  let noCount = 0;
  const questions = [
    "¬øSegura, Amor? ü•∫",
    "Luz‚Ä¶ pi√©nsalo otra vez üíï",
    "Vamos, mi Amor‚Ä¶ di que s√≠ üòò",
    "Ok, ya no hay bot√≥n NO üòè‚ù§Ô∏è"
  ];

  // --- M√∫sica (solo inicia tras interacci√≥n)
  function startMusic(){
    const bgm = document.getElementById("bgm");
    bgm.play().catch(()=>{});
  }

  // --- Corazones
  function hearts(n=12){
    for(let i=0;i<n;i++){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = Math.random() > 0.5 ? "üíñ" : "üíó";
      h.style.left = (Math.random()*100) + "vw";
      h.style.animationDuration = (4 + Math.random()*6) + "s";
      h.style.fontSize = (14 + Math.random()*22) + "px";
      h.style.opacity = (0.35 + Math.random()*0.6);
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 12000);
    }
  }
  hearts(18);
  setInterval(()=>hearts(10), 2600);

  // --- Rotaci√≥n de im√°genes sin repetir hasta agotar
  let remaining = [...NAYEON_IMAGES];
  function pickNextImage(){
    if (remaining.length === 0) remaining = [...NAYEON_IMAGES];
    const i = Math.floor(Math.random() * remaining.length);
    const chosen = remaining.splice(i, 1)[0];
    return chosen;
  }
  function setNewNayeon(){
    const img = document.getElementById("nayeonImg");
    const url = pickNextImage();
    img.src = url + "?r=" + Date.now(); // peque√±o cache-buster
  }
  setNewNayeon(); // inicial

  // --- ‚ÄúNO huye‚Äù
  const noBtn = document.getElementById("noBtn");
  const btnArea = document.getElementById("btnArea");

  // Convierte el NO en flotante para moverlo dentro del √°rea
  function ensureNoFloating(){
    if (!noBtn.classList.contains("no-floating")) {
      noBtn.classList.add("no-floating");
      // posici√≥n inicial dentro del √°rea
      moveNoButton();
    }
  }

  function moveNoButton(){
    // l√≠mites del √°rea de botones
    const areaRect = btnArea.getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();

    // calcula rangos donde cabe el bot√≥n
    const maxX = Math.max(0, areaRect.width - btnRect.width);
    const maxY = Math.max(0, areaRect.height - btnRect.height);

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    // posiciona relativo al contenedor .buttons
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
    noBtn.style.transform = "translate(0,0)";
  }

  // Huir al pasar/tocar
  noBtn.addEventListener("mouseenter", () => {
    if (noCount < 4) { ensureNoFloating(); moveNoButton(); }
  });
  noBtn.addEventListener("touchstart", (e) => {
    if (noCount < 4) {
      e.preventDefault();
      ensureNoFloating();
      moveNoButton();
    }
  }, { passive: false });

  // --- ‚ÄúS√ç crece‚Äù cada vez que intenta NO
  let yesScale = 1;
  const yesBtn = document.getElementById("yesBtn");
  function growYes(){
    yesScale = Math.min(1.65, yesScale + 0.12);
    yesBtn.style.transform = `scale(${yesScale})`;
  }

  // --- Click NO: cambia pregunta + cambia imagen + crece S√ç + eventualmente desaparece NO
  function reject(){
    startMusic();
    setNewNayeon();   // otra foto en cada pregunta
    growYes();

    const question = document.getElementById("question");
    const sub = document.getElementById("sub");
    const tiny = document.getElementById("tiny");

    // actualiza texto
    question.textContent = questions[Math.min(noCount, questions.length - 1)];
    sub.textContent = "Cada NO me hace insistir m√°s‚Ä¶ y sacar otra foto de Nayeon üê∞üíó";

    noCount++;

    // 4ta repregunta => borrar NO
    if (noCount >= 4){
      noBtn.style.display = "none";
      tiny.textContent = "Ya fue‚Ä¶ el destino dice que es S√ç üòåüíò";
    } else {
      // que huya tambi√©n despu√©s de click
      ensureNoFloating();
      moveNoButton();
    }
  }

  function accept(){
    startMusic();
    const card = document.getElementById("card");
    card.innerHTML = `
      <div class="badge">üíó TWICE approved ‚Ä¢ ONCE forever</div>
      <h1>üíñüíñüíñ</h1>
      <h1>Sab√≠a que aceptar√≠as, eres el amor de mi vida.</h1>
      <h1>Poto amorcito üíï</h1>
      <div class="tiny" style="margin-top:10px;">Luz, mi Amor‚Ä¶ feliz San Valent√≠n üê∞</div>
    `;
    hearts(26);
  }
</script>
</body>
</html>
